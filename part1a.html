<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Making your first Phaser 3 Game - Part 2</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.1.1/dist/phaser.js"></script>
    <link href="./css/styles.css"></style>
</head>
<body>
    <script type="text/javascript">
        class View {
            constructor(width, height)
            {
                this.width = width
                this.height = height
            }
        }

        class Img {
            constructor(alias, path)
            {
                this.alias = alias
                this.path = path
            }

            preload(index)
            {
                index.load.image(this.alias, this.path)
            }

            create(index, posX=0, posY=0)
            {
                index.add.image(posX, posY, this.alias)
            }

            update(index)
            {

            }
        }

        class SpriteSheet extends Img {
            constructor(alias, path, frame){
                super(alias, path)
                this.frame = frame
            }

            preload(index)
            {
                index.load.spritesheet(this.alias, this.path, this.frame)
            }

            create(index)
            {
                index.add.spritesheet()
            }

            update(index)
            {
                
            }
        }

        class Frame {
            constructor(width,height){
                this.frameWidth = width
                this.frameHeight = height
            }
        }

        class SquareFrame extends Frame {
            constructor(size){
                super(size,size)
            }
        }

        class Scene
        {
            constructor(preload, create, update)
            {
                this.preload = preload
                this.create = create
                this.update = update
            }
        }

        class Config
        {
            constructor(view, physics, scene)
            {
                this.type = Phaser.AUTO,
                this.width = view.width,
                this.height = view.height,
                this.physics = physics,
                this.scene = scene
            }
        }

        const physics = {
            platformer: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 300 },
                    debug: false
                }
            }
        }

        const assets = 'js/assets/'

        const view = new View(512,382)
        const elements = {
            background: new Img('sky', assets + 'sky.png'),
            star: new Img('star', assets + 'star.png'),
            platform: new Img('platform', assets + 'platform.png'),
            bomb: new Img('bomb', assets + 'bomb.png'),
            dude: new SpriteSheet('dude', assets + 'dude.png', new SquareFrame(48))
        }
        const background = new Img('sky', assets + 'sky.png')
        const star = new Img('star', assets + 'star.png')

        function preload()
        {
            background.preload(this)
            star.preload(this)
        }
        function create()
        {
            background.create(this, view.height/2, view.width/2)
            star.create(this, view.height/2, view.width/2)
        }
        function update()
        {

        }

        const sceneA = new Scene(preload, create, update)
        const config = new Config(view, physics.platformer, sceneA)
        const game = new Phaser.Game(config)
    </script>
</body>
</html>